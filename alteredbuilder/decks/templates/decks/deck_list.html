{% extends "base.html" %}

{% load static %}

{% block title %}Home{% endblock %}

{% block head %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
{% endblock %}

{% block content %}
    <div>
        <h3>Public decks</h3>
        <table class="table table-hover table-clickable" id="publicDecksTable" aria-describedby="Public decks">
            <thead>
                <tr>
                    <th scope="col">Owner</th>
                    <th scope="col">Name</th>
                    <th scope="col">Faction</th>
                    <th scope="col">Hero</th>
                    <th scope="col">
                        <a data-bs-toggle="tooltip" data-bs-title="Standard | Draft">
                            Legality <i class="fa-regular fa-circle-question"></i>
                        </a>
                    </th>
                    <th scope="col">Last updated</th>
                </tr>
            </thead>
            <tbody class="table-group-divider">
    {% for deck in deck_list %}
                <tr data-href="{% url 'deck-detail' pk=deck.id %}">
                    <td>{{ deck.owner.username }}</td>
                    <td>{{ deck.name }}</td>
                    <td>{{ deck.hero.get_faction_display.title }}</td>
                    <td data-bs-toggle="tooltip" data-bs-title="<img src='{{ deck.hero.image_url }}'/>" data-bs-html="true" data-bs-placement="right">{{ deck.hero.name }}</td>
                    <td>{% if deck.is_standard_legal %}<i class="fa-solid fa-check"></i>{% else %}<i class="fa-solid fa-xmark"></i>{% endif %} | {% if deck.is_draft_legal %}<i class="fa-solid fa-check"></i>{% else %}<i class="fa-solid fa-xmark"></i>{% endif %}</td>
                    <td>{{ deck.modified_at|timesince }} ago</td>
                </tr>
    {% endfor %}
            </tbody>
        </table>

    {% include "./snippets/pagination.html" %}

    {% if own_decks %}
        <h3>Own decks</h3>
        <table class="table table-hover table-clickable" id="ownDecksTable" aria-describedby="Own decks">
            <thead>
                <tr>
                    <th scope="col">Owner</th>
                    <th scope="col">Name</th>
                    <th scope="col">Faction</th>
                    <th scope="col">Hero</th>
                    <th scope="col">
                        <a data-bs-toggle="tooltip" data-bs-title="Standard | Draft">
                            Legality <i class="fa-regular fa-circle-question"></i>
                        </a>
                    </th>
                    <th scope="col">Is it public?</th>
                    <th scope="col">Last updated</th>
                </tr>
            </thead>
            <tbody class="table-group-divider">
        {% for deck in own_decks %}
                <tr data-href="{% url 'deck-detail' pk=deck.id %}">
                    <td>{{ user.username }}</td>
                    <td>{{ deck.name }}</td>
                    <td>{{ deck.hero.get_faction_display.title }}</td>
                    <td data-bs-toggle="tooltip" data-bs-title="<img src='{{ deck.hero.image_url }}'/>" data-bs-html="true" data-bs-placement="right">{{ deck.hero.name }}</td>
                    <td>{% if deck.is_standard_legal %}<i class="fa-solid fa-check"></i>{% else %}<i class="fa-solid fa-xmark"></i>{% endif %} | {% if deck.is_draft_legal %}<i class="fa-solid fa-check"></i>{% else %}<i class="fa-solid fa-xmark"></i>{% endif %}</td>
                    <td>{% if deck.is_public %}<i class="fa-solid fa-check"></i>{% endif %}</td>
                    <td>{{ deck.modified_at|timesince }} ago</td>
                </tr>
        {% endfor %}
            </tbody>
        </table>
    {% endif %}
    </div>
{% endblock %}


{% block bodyscripts %}
    <script src="{% static 'js/deck-list.js' %}"></script>
    <script src="{% static 'js/tooltip-enable.js' %}"></script>
{% endblock %}